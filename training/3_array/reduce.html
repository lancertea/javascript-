<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>模拟实现reduce数组方法</title>
</head>

<body>
    <script>
        //reduce（）函数接受两个参数，一个函数一个累积变量的初始值。
        //函数有四个参数：累计变量初值（默认第一个成员），当前变量值（默认第二个成员），当前位置，数组自身。
        //arr.reduce(function(prev, cur, index, arr){}, initialValue)
        Array.prototype._reduce = function (fn, init) {
          const hasInit = init !== undefined;
          let res = hasInit ? init : this[0],
              start = hasInit ? 0 : 1;
          this.slice(start).forEach((item,index)=>{
            res = fn(res,item,index + start, this)
          });
          return res;
        };

        let arr = [1,2,3,4];
        let res = arr._reduce((pre,cur,index)=>pre+cur+index, 4);
        console.log(res);
    </script>
</body>

</html>