<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>模拟new的实现</title>

</head>

<body>
    <script>
        function myNew(...arg) {
            let obj = {},
            // base = [].shift.call(arguments);
            // base=[...arguments].shift();  这样是错的，相当于进行了一次浅拷贝
            base = arg[0] || Object;
            // obj.__proto__ = base.prototype;
            Object.setPrototypeOf(obj, base.prototype);
            base.apply(obj, arg.slice(1));
            return obj;
        }

        function Car(color) {
            this.color = color;
        }

        Car.prototype.start = function () {
            console.log(this.color);

        };
        var car = myNew(Car, 'black');
        car.start();
    </script>
</body>

</html>