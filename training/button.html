<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>作用域、绑定</title>
</head>


<body>
    <div id="btnBox">
        <input type="button" value="button_1" />
        <input type="button" value="button_2" />
        <input type="button" value="button_3" />
        <input type="button" value="button_4" />
        <input type="button" value="button_5" />
    </div>

    <script>
        //以下代码的功能是要实现为5个input按钮循环绑定click点击事件，绑定完成后点击1、2、3、4、5五个按钮
        //分别会alert输出0、1、2、3、4五个字符。（腾讯）
        // var Bt=document.getElementById('btnBox'),
        //     btns=document.getElementsByTagName('input'),
        //     l=btns.length;//缓存
        // for(var i=0;i<l;i++){
        // btns[i].onclick=function(){
        //     alert(i);//5 5 5 5 5
        // }
        // }

        // for (var j = 0; j < 5; j++) {
        //     setTimeout(function () {
        //         console.log(m);

        //     }, 0);
        // }

        //自定义属性
        // var btns = document.getElementsByTagName('input'),
        //     l = btns.length; //缓存
        // for (var i = 0; i < l; i++) {
        //     var item = btns[i];
        //     item.index = i;
        //     item.onclick = function () {
        //         alert(this.index); //0 1 2 3 4 
        //     }
        // }

        // for (var j = 0; j < 5; j++) {
        //     let m = j;
        //     setTimeout(function () {
        //         console.log(m);

        //     }, 0);
        // }

        //闭包
        // var  btns = document.getElementsByTagName('input'),
        //     l = btns.length; //缓存
        //   for(var i=0;i<l;i++){
        //     (function(j){
        //         btns[j].onclick=function(){
        //          alert(j);  //0 1 2 3 4
        //      }

        //     })(i);           
        //   }

        //     for(var j=0;j<5;j++){
        //    (function(i){
        //     setTimeout(function(){
        //     console.log(i); 
        //    },0);
        //    })(j)

        /* for (var i = 0; i < 10; i++) {
	setTimeout((i => () => console.log(i))(i), 1000);
       } */

        //=>可以基于bind的预先处理机制：在循环的时候就把每次执行函数需要输出的结果，预先传给函数即可
        /* var fn = function (i) {
	     console.log(i);
      };
      for (var i = 0; i < 10; i++) {
	     setTimeout(fn.bind(null, i), 1000);
    } */

        //let 块级作用域
        // var btns=document.getElementsByTagName('input'),
        // l=btns.length;
        // for(let i=0;i<l;i++){
        //     btns[i].onclick=function(){
        //         alert(i); //0 1 2 3 4
        //     }
        // }

        //     for(let j=0;j<5;j++){
        //     setTimeout(function(){
        //     console.log(j); 
        //    },0);
        //    }

        //forEach  伪数组转换为数组
        var btns = document.getElementsByTagName('input');
        [].forEach.call(btns, (item, index) => {
            item.onclick = function () {
                alert(index); //0 1 2 3 4
            }
        });

        //事件代理
        // var Bt = document.getElementById('btnBox');
        // Bt.onclick=function(e){
        //  console.log((e.target.value.slice(-1))-1); //0 1 2 3 4
        //  }
        //e.target.innerHTML.slice(-1)

        // var Bt = document.getElementById('btnBox');
        // console.log(Bt.childNodes);
        // console.log(Bt.children);

        //setTimeout()
        // for (var i = 0; i < 5; i++) {
        //     setTimeout(() => {
        //         console.log(i);
        //     }, 1000);
        // }

        // for (let i = 0; i < 5; i++) {
        //     setTimeout(() => {
        //         console.log(i);
        //     }, 1000);
        // }

        // for (var i = 0; i < 5; i++) {
        //     ~ function (i) {
        //         setTimeout(() => {
        //             console.log(i);
        //         }, 1000);
        //     }(i);
        // }

        // for (var i = 0; i < 5; i++) {
        //     setTimeout((i =>
        //         () => console.log(i))(i), 1000);
        // }

        var fn = function (i) {
            console.log(i);
        }
        for (var i = 0; i < 5; i++) {
            setTimeout(fn.bind(null, i), 1000);
        }
    </script>
</body>

</html>