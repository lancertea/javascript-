<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>dobounce</title>
    <style>
        body{
            height: 3000px;
        }
    </style>
</head>

<body>
    <script>
    //优化前    
    //  window.addEventListener('scroll',function(){
    //      var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;
    //      console.log('滚动的高度'+scrollTop);
         
    //  });

    function debounce(fn,delay){
          var timeout=null;
          return function(){
              //判断当前有无定时器
              if(timeout!=null){
               clearTimeout(timeout);
              }
              timeout=setTimeout(fn,delay);
          }
    }

    function handle(){
        console.log(Math.random());
        
    }

     window.addEventListener('scroll',debounce(handle,1000));
        
    </script>
</body>

</html>