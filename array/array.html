<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>关于数组的问题</title>
    <script>
        //1.数组是动态变化的
        //JavaScript的Array可以包含任意数据类型，并通过索引来访问修改每个元素。
        var a = [1, 2, 3.14, 'Hello', null, true];
        a[1] = 99;
        console.log(a); //[1, 99, 3.14, 'Hello', null, true]
        //Array的大小是动态调整的
        a.length = 8;
        console.log(a); //[1, 99, 3.14, 'Hello', null, true，undefined，undefined]


        //2.复制数组的方法
        var a = [1, 2, 3, 4, 5];
        var acopy = a.slice();
        console.log(acopy); //[1,2,3,4,5]
        console.log(a === acopy); //false 返回的是原数组的副本

        var acopy1 = a.concat();
        console.log(acopy1); //[1,2,3,4,5]
        console.log(a === acopy1); //false 返回的是原数组的副本

        //错误示例：不要用改变原数组的方法去复制数组，这样对新数组操作时，原数组也会改变
        var acopy2 = a.copyWithin(0); //a2.copyWithin(0,0)也可
        console.log(acopy2); //[1,2,3,4,5]
        console.log(a); //[1,2,3,4,5]
        console.log(a === acopy2); //true  在原数组上做修改
        acopy2.push(6);
        console.log(acopy2); //[1,2,3,4,5,6]
        console.log(a); //[1,2,3,4,5,6]

        /*
        3.改变原数组、不改变原数组生成副本的方法总结
        改变原数组：copyWithin()、fill()、push()、pop()、shift()、unshift()、reverse()、sort()、splice()
        生成副本：concat()、filter()、find()、findIndex()、map()、slice()、some()

        */


        //4.数组去重的方法
        var arr = [1, 2, 3, 3, 4];
        console.log(...new Set(arr)); //1,2,3,4
        console.log([...new Set(arr)]); //[1,2,3,4]

        /*
        5.数组和布尔
        有时我们需要过滤数组中值为 false 的值. 例如(0, undefined, null, false)，可传入一个 Boolean 函数
        */
        var arr = [1, 0, undefined, null, false];
        console.log(arr.filter(Boolean)); //[1]

        /*
        6.concat()方法
        用于连接两个或多个数组
        不改变原数组、返回被连接数组的副本
        */
        var colors = ["red", "green", "blue"];
        var colors1 = colors.concat("yellow", ["black", "brown"]);
        var colors2 = colors.concat("yellow", ["black", "brown", ["white", "grey"]]);

        console.log(colors); //["red", "green", "blue"]       
        console.log(colors1); //["red", "green", "blue", "yellow", "black", "brown" ]
        console.log(colors2); //["red", "green", "blue", "yellow", "black", "brown",["white","grey"]]

        /*
        7.copyWithin()方法
        用于从数组的指定位置拷贝元素到数组的另一个指定位置
        改变原数组
        array.copyWithin(target, start, end)
        target: 必需。复制到指定目标索引位置
        start : 可选。元素复制的起始位置
        end:    可选。停止复制的索引位置 (默认为 array.length)。如果为负值，表示倒数
        */
        var a = [1, 2, 3, 4, 5];
        console.log(a.copyWithin(0, 2)); //[ 3, 4, 5, 4, 5 ]
        console.log(a); //[ 3, 4, 5, 4, 5 ] 改变原数组
        var acopy = [1, 2, 3, 4, 5];
        console.log(acopy.copyWithin(2, 0, 2)); //[1,2,1,2,5]
        var acopy1 = [1, 2, 3, 4, 5];
        console.log(acopy1.copyWithin(1, 0, -2)); //[1,1,2,3,5]

        /*
        8.splice()方法
        splice() 方法用于添加或删除数组中的元素。
        这种方法会改变原始数组。
        */
        var colors = ["red", "green", "blue"];
        var removed = colors.splice(0, 1); //移除第一项
        console.log(colors); // [green", "blue" ]
        console.log(removed); // [ "red"]

        removed = colors.splice(1, 0, "yellow", "orange"); //在索引为1的位置插入两项
        console.log(colors); //[ "green", "yellow", "orange", "blue" ]
        console.log(removed); //[]

        removed = colors.splice(1, 1, "red", "purple"); //i在索引为1的位置删除一项，插入两项
        console.log(colors); //[ "green", "red", "purple", "orange", "blue" ]
        console.log(removed); //[ "yellow" ]

        /*
        9.delete操作符
        delete 操作符用于删除对象的某个属性；如果没有指向这个属性的引用，那它最终会被释放。
        */

        var obj = {
            age: 25,
            weight: 80,
            height: 168,
            sayHi: function () {
                console.log("hi");
            }
        };
        //delete 操作符会从某个对象上移除指定属性。成功删除的时候返回 true
        console.log(delete obj.age); //true
        console.log(obj); //Object { weight: 80, height: 168, sayHi: sayHi()}
        //如果试图删除的属性不存在，那么delete将不会起任何作用，但仍会返回true
        console.log(delete obj.gender); //true

        //如果对象的原型链上有一个与待删除属性同名的属性，那么删除属性之后，
        //对象会使用原型链上的那个属性（也就是说，delete操作只会在自身的属性上起作用）
        function Person(name, age, job) {
            this.name = name;
            this.age = age;
            this.job = job;
            this.sayName = function () {
                console.log(this.name);

            };
        }
        Person.prototype.job = "engineer";
        var person1 = new Person("jane", 25, "teacher");
        console.log(person1); //Object { name: "jane", age: 25, job: "teacher", sayName: sayName()}
        console.log(delete person1.job); //true
        console.log(person1); //Object { name: "jane", age: 25, sayName: sayName()}
        console.log(person1.job); //engineer
        console.log(delete person1.job); //true
        console.log(person1.job); //engineer

        /*
        任何使用 var 声明的属性不能从全局作用域或函数的作用域中删除。 
        任何用let或const声明的属性不能够从它被声明的作用域中删除。
        这样的话，delete操作不能删除任何在全局作用域中的函数（无论这个函数是来自于函数声明或函数表达式）
        除了在全局作用域中的函数不能被删除，在对象(object)中的函数是能够用delete操作删除的。
        */
        var a = 1;
        let aa = 2;
        const aaa = 3;
        delete a;
        console.log(a); //1
        delete aa;
        console.log(aa); //2
        delete aaa;
        console.log(aaa); //3

        function hello() {
            console.log("hello");

        }
        delete hello;
        hello(); //hello

        // Person.sayName =function(){
        //     console.log(this.name);

        // }
        person1.sayName(); //jane
        delete Person.sayName;
        person1.sayName(); //jane

        obj.sayHi(); //hi
        delete obj.sayHi;
        console.log(obj); //Object { weight: 80, height: 168 }

        //当你删除一个数组元素时，数组的长度不受影响。即便你删除了数组的最后一个元素也是如此。
        //当用 delete 操作符删除一个数组元素时，被删除的元素已经不再属于该数组。
        var a = [1, 2, 3, 4, 5];
        delete a[2];
        console.log(a); //[1, 2, <1 empty slot>, 4, 5]
        if (2 in a)
            console.log("bye"); //不执行

        //如果你想让一个数组元素继续存在但是其值是 undefined，
        //那么可以使用将 undefined 赋值给这个元素而不是使用 delete。
        var a = [1, 2, 3, 4, 5];
        a[2] = undefined;
        if (2 in a)
            console.log("bye"); //bye

        //想要删除数组
        var a = [1, 2, 3, 4, 5];
        console.log(a.pop()); //5
        console.log(a); //[1, 2, 3, 4]
        console.log(a.shift()); //1
        console.log(a); //[2, 3, 4]
        console.log(a.splice(1, 1)); //[3]
        console.log(a); //[2,4]
    </script>
</head>

<body>

</body>

</html>