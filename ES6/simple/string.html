<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ES6对字符串的扩展</title>
    <script>
        //ES5  字符串拼接
        let food = 'cake',
            drink = 'milk',
            fav = 'I love ' + food + ' and ' + drink + ' ~';
        console.log(fav); //'I love cake and milk ~'

        //ES6
        let fav1 = `I love ${food} and ${drink} ~`;
        console.log(fav1); //'I love cake and milk ~'
        let fav2 = deal `I love ${food} and ${drink} ~`;

        function deal(string, ...values) {
            console.log(string); // [ "I love ", " and ", " ~" ]
            console.log(values); //[ "cake", "milk" ]  
        }

        //includes()：返回布尔值，表示是否找到了参数字符串。 
        //startsWith()：返回布尔值，表示参数字符串是否在原字符串的头部。
        //上面这两个方法支持第二个参数，表示开始搜索的位置(从第n个位置直到字符串结束)
        //下面这个方法也支持，但表示的是前n个字符
        //endsWith()：返回布尔值，表示参数字符串是否在原字符串的尾部。
        console.log(fav1.startsWith('I')); //true
        console.log(fav1.endsWith('!')); //false
        console.log(fav1.includes('love')); //true

        let s = "hello world";
        console.log(s.includes("e")); //true
        console.log(s.includes("o", 5)); //true
        console.log(s.startsWith("o", 7)); //true
        console.log(s.endsWith("o", 5)); //true

        //ES5
        // const retailPrice = 20
        // const wholeSalePrice = 16
        // const type = 'retail'
        // let showTxt = ''
        // if (type === 'retail') {
        //     showTxt = '您此次的购买单价是：' + retailPrice
        // } else {
        //     showTxt = '您此次的购买的批发价是：' + wholeSalePrice
        // }
        // console.log(showTxt)

        function Price(strings, type) {
            let s1 = strings[0]
            const retailPrice = 20
            const wholeSalePrice = 16
            let showTxt
            if (type === 'retail') {
                showTxt = '购买单价是：' + retailPrice
            } else {
                showTxt = '购买的批发价是：' + wholeSalePrice
            }
            return `${s1}${showTxt}`
        }

        let showTxt = Price `您此次的${'retail'}`
        console.log(showTxt)

        //ES5
        let s1 = '我是第一行' + '\n' + '我是第二行';
        console.log(s1);

        //ES6
        let s2 = `我是第一行
我是第二行`

        console.log(s2)

        //ES6 repeat()  返回一个新字符串，表示将原字符串重复n次
        console.log('x'.repeat(3)); //'xxx'
        //参数如果是小数，会被取整
        console.log('na'.repeat(2.9)); //'nana'
        //是负数或者Infinity，会报错.-1到0视为0
        console.log('na'.repeat(-0.9)); //''

        //padStart()头部补全,字符串从左向右补全
        //padEnd()尾部补全
        //一共接受两个参数，第一个参数是字符串补全生效的最大长度，第二个参数是用来补全的字符串
        {
            console.log('x'.padStart(5, 'ab')); //'ababx'
            console.log('x'.padStart(4, 'ab')); //'abax'
            console.log('x'.padEnd(5, 'ab')); //'xabab'
            console.log('x'.padEnd(4, 'ab')); //'xaba'
            console.log('xxx'.padStart(2, 'ab'));// 'xxx'
            console.log('abc'.padStart(10, '0123456789'));//'0123456abc'
            console.log('x'.padStart(4));// '   x'
        }

        //trimStart()消除字符串头部的空格  trimLeft()是trimStart()的别名
        //trimEnd()消除尾部的空格 trimRight()是trimEnd()的别名

        {
            //String.prototype.matchAll() 
            let regex = /t(e)(st(\d?))/g;
            let str = 'test1test2test3';
            let match;
            while (match = regex.exec(str)) {
                console.log(match);
            }

            for (let match of str.matchAll(regex)) {
                console.log(match);
            }
        }
        {
            //String.prototype.replaceAll() 
            console.log('aabbcc'.replace(/b/,'_')); //'aa_bcc'
            console.log('aabbcc'.replace(/b/g,'_')); //'aa__cc'
            console.log('aabbcc'.replaceAll('b','_')); //'aa__cc'
            // 正则必须带g
            console.log('aabbcc'.replaceAll(/b/g,'_')); //'aa__cc'
        }

        {
            // at()方法接受一个整数作为参数，返回参数指定位置的字符，支持负索引（即倒数的位置）。
            const str = 'hello';
            console.log(str.at(1))// "e"
            console.log(str.at(-1))// "o"
            // 如果参数位置超出了字符串范围，at()返回undefined
            console.log(str.at(10))// undefined
        }
    </script>
</head>

<body>

</body>

</html>