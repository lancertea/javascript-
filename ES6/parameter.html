<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>默认参数</title>
</head>
<script>
  {
    // ES5\ES3 默认参数的写法
    function f(x, y, z) {
      if (y === undefined) {
        y = 7;
      }
      if (z === undefined) {
        z = 42
      }
      return x + y + z
    }
    console.log(f(1)); //50
    console.log(f(1, 3)); //46
  }

  {
    function a(x, y) {
      x = x || '123';
      y = y || '456';
      //x=''||'123'=false||'123'='123'
      return x+y;
    }
    console.log(a('')); //'123456'

  }



  {
    // ES6 默认参数
    //ES6 内部使用严格相等运算符（===），判断一个位置是否有值。所以，只有当一个数组成员严格等于undefined，默认值才会生效。
    //一般默认值尽量往后放
    function f(x, y = 7, z = 42) {
      return x + y + z
    }
    console.log(f(1, 3)); //46
    console.log(f(1, undefined, 43)); //51

    //默认值可以是表达式
    // function f (x, y = 7, z = x + y) {
    //   console.log(f.length)
    //   return x * 10 + z
    // }

  }

  // 必填参数的检查
  {
    function checkParameter() {
      throw new Error('can\'t be empty')
    }

    function f(x = checkParameter(), y = 7, z = 42) {
      return x + y + z
    }
    console.log(f(1)); //50
    try {
      f()
    } catch (e) {
      console.log(e);
    } finally {}
  }
  //可选参数
  {
    function sum(x, y, {
      m,
      n
    } = {}) {
      console.log(x, y, m, n);
    }
    sum(1, 2); //1 2 undefined undefined
  }

  //如何处理不确定参数的问题
  {
    // 不确定参数有几个，但是要对他们求和  
    // ES3,ES5 
    //arguments：实参长度
    function f() {
      var sum = 0;
      Array.prototype.forEach.call(arguments, function (item) {
        sum += item * 1;
      })
      //ES6
      // Array.from(arguments,function(item){
      //   sum+=item*1;
      // })
      return sum
    }
    console.log(f(1, 2, 3, 6)); //12
  }

  {
    // ES6 可变参数
    //函数名.length只能确定没有默认值的参数的个数
    //...
    function sum1(x, y, z = 0) {
      return x + y + z;
    }
    console.log(sum1.length); //2

    function f(...a) {
      var sum = 0;
      a.forEach(item => {
        sum += item * 1
      });
      return sum
    }
    console.log(f(1, 2, 3, 6)); //12
  }

  {
    // ES5 合并数组
    var params = ['hello', true, 7];
    var other = [1, 2].concat(params);
    console.log(other); //[ 1, 2, "hello", true, 7 ]
  }

  //rest参数的逆运算
  // function sum(x = 1, y = 2, z = 3) {
  //   return x + y + z
  // }
  // let data = [4, 5, 9]
  // //ES5
  // // console.log(sum(data[0], data[1], data[2]))
  // // console.log(sum.apply(this, data))
  // // ES6  spread
  // console.log(sum(...data))

  {
    // ES6 利用扩展运算符合并数组
    var params = ['hello', true, 7];
    var other = [
      1, 2, ...params
    ];
    console.log(other); //[ 1, 2, "hello", true, 7 ]
  }

  

  /*
// 写法一
function m1({x = 0, y = 0} = {}) {
  return [x, y];
}

// 写法二
function m2({x, y} = { x: 0, y: 0 }) {
  return [x, y];
}
  
// 函数没有参数的情况
m1() // [0, 0]
m2() // [0, 0]

// x 和 y 都有值的情况
m1({x: 3, y: 8}) // [3, 8]
m2({x: 3, y: 8}) // [3, 8]

// x 有值，y 无值的情况
m1({x: 3}) // [3, 0]
m2({x: 3}) // [3, undefined]

// x 和 y 都无值的情况
m1({}) // [0, 0];
m2({}) // [undefined, undefined]

m1({z: 3}) // [0, 0]
m2({z: 3}) // [undefined, undefined] 
  */
</script>

<body>

</body>

</html>