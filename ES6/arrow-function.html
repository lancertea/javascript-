<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>箭头函数</title>
</head>
<script>
    {
        // ES3,ES5
        var evens = [1, 2, 3, 4, 5];
        var odds = evens.map(function (v) {
            return v + 1
        });
        console.log(evens, odds);
    }; {
        // ES6
        //当函数只有一个参数的时候，小括号可以省略
        //当函数体只返回一个表达式的时候，花括号可以省略，如果是返回一个对象
        //或者函数体内有多句，花括号不能省略
        let evens = [1, 2, 3, 4, 5];
        let odds = evens.map(v => v + 1);
        console.log(evens, odds);
    } {
        // ES3,ES5
        var factory = function () {
            this.a = 'a';
            this.b = 'b';
            this.c = {
                a: 'a+',
                b: function () {
                    return this.a
                }
            }
        }

        console.log(new factory().c.b());//'a+'
    };

    {
        var factory = function () {
            this.a = 'a';
            this.b = 'b';
            this.c = {
                a: 'a+',
                b: () => {
                    return this.a
                }
            }
        }
        console.log(new factory().c.b());//'a'
    }

    //this的指向:箭头函数没有自己的this，它内部的this，并不是调用的时候指向的对象，而是定义的时候指向的对象
    var name='a';
    let test = {
        name: 'test',
        say: () => {
            console.log(this.name, this)//a window
        }
    }
    test.say();

    //箭头函数不能用于构造函数，意味着不能用new关键字去调用
    // let F=()=>{};
    // let f1=new F();

    //箭头函数内部没有arguments
    function fn(){
        console.log(arguments);
        
    }
    fn(1,2,3);//Arguments { 0: 1, 1: 2, 2: 3, … }
    
    // let f2=()=>{
    //     console.log(arguments);
        
    // }
    // f2(1,2,3);//not defined

    //解决方法
    let f3=(...rest)=>{
        console.log(rest);
        
    }
    f3(1,2,3);//Array(3) [ 1, 2, 3 ]
</script>

<body>

</body>

</html>