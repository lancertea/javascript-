<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>对象的扩展</title>
    <script>
        //属性的简写表达式
        //ES6 
        {
            let x = 1,
                y = 2,
                obj = {
                    x,
                    y
                };
            console.log(obj); //{x:1,y:2}
        }
        //ES5
        {
            let name = 'zss',
                age = 18,
                z = 3;
            let obj = {
                name,
                age,
                b: function () {
                    console.log(this.name);

                }
            };
            obj[z] = 5;
            obj.b(); //zss
            console.log(obj); //{3:5,age:18,b:f(),name:'zss'}

        }
        //ES6
        {
            let obj = {
                name,
                age,
                [z]: 6,
                //允许表达式
                [z + age]: 24,
                //函数简写，*b 表示异步
                b() {
                    console.log(this.name);

                }
            };
            obj1.b(); //zss
        }

        //Object.is()
        //判断两个值是不是一个东西
        //修复NaN不等于自己的问题
        console.log(NaN === NaN); //false
        console.log(+0 === -0); //true       
        console.log(Object.is(NaN, NaN)); //true
        console.log(Object.is(+0, -0)); //false

        //Object.assign(target,orign)
        //对象拷贝:浅拷贝
        let origin = {
            a: 1,
            b: 2
        };
        let target = {}
        Object.assign(target, origin);
        console.log(target); //Object { a: 1, b: 2 }
        //如果只有一个参数，Object.assgin()会直接返回该参数
        console.log(Object.assign(origin) === origin); //true

        //目标对象传入undefined和null会报错
        // Object.assign(null,origin);
        // Object.assign(undefined,origin);

        //如果源对象的参数是undefined和null，目标对象不变
        let t1 = {
            a: 1
        };
        let test = Object.assign(t1, null);
        console.log(t1); //{a:1}
        console.log(t1 === test); //true
        let t2 = {};
        test = Object.assign(t2, undefined);
        console.log(t2); //{}
        console.log(t2 === test); //true

        let t3 = {
            a: 1,
            b: {
                c: 2
            }
        };
        Object.assign(t3, origin);
        console.log(t3); //{ a: 1, b: 2 }

        //Object.assign(target,orign)
        // 常见用途
        // 1.为对象添加属性、方法
        // 2.克隆对象
        // 3.合并多个对象
        // 4.为属性指定默认值

        {
            // Object.getOwnPropertyDescriptors()
            // 该方法的引入目的，主要是为了解决Object.assign()无法正确拷贝get属性和set属性的问题
        }

        {
            // Object.fromEntries() 
            // Object.fromEntries()方法是Object.entries()的逆操作，用于将一个键值对数组转为对象。

            // 用途一：将键值对的数据结构还原为对象，因此特别适合将 Map 结构转为对象。
            const entries = new Map([
                ['foo', 'bar'],
                ['baz', 42]
            ]);
            console.log(Object.fromEntries(entries));

            // 用途二： 配合URLSearchParams对象，将查询字符串转为对象
            console.log(Object.fromEntries(new URLSearchParams('foo=bar&baz=qux')));
        }
    </script>
</head>

<body>

</body>

</html>