<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>AJAX</title>
</head>

<body>
	<!-- 同步异步 -->
	<script>
/*注：xhr.open第三个参数控制的同步异步指的是：从当前send发送请求，算任务开始，一直到AJAX状态为4才算任务结束
(同步是：在此期间所有的任务都不去处理，而异步是：在此期间该干啥干啥(在send后会把这个请求的任务放在EventQueue(宏任务)))*/
		//=>AJAX任务的异步
		/* let xhr = new XMLHttpRequest;
		xhr.open('GET', 'json/data.json');
		//=>设置事件绑定之前状态1
		xhr.onreadystatechange = function () {
			console.log(xhr.readyState); //=>2 3 4
		}
		xhr.send(null); */

		/* let xhr = new XMLHttpRequest;
		xhr.open('GET', 'json/data.json');
		xhr.send(null);
		xhr.onreadystatechange = function () {
			console.log(xhr.readyState); //=>2 3 4
		} */


		//=>AJAX的同步
		/* let xhr = new XMLHttpRequest;
		xhr.open('GET', 'json/data.json', false);
		xhr.onreadystatechange = function () {
			console.log(xhr.readyState); //=>4 使用AJAX同步编程，不能在状态码为2的时候获取到响应头的信息，但是状态码为4的时候也是可以获取到头和主体信息
		}
		xhr.send(null); */

		/* let xhr = new XMLHttpRequest;
		xhr.open('GET', 'json/data.json', false);
		xhr.send(null);//=>执行后，只有状态码为4才会继续处理下面的代码
		//=>状态码为4的时候绑定的，而状态不会在变了，所以方法不会执行
		xhr.onreadystatechange = function () {
			console.log(xhr.readyState);
		} */

		// API：Application Programming Interface 凡是可被别人调用，并且给予反馈结果的都可以被称之为API接口
	</script>

	<script>
		/* let xhr = new XMLHttpRequest;
		xhr.open('GET', 'http://yapi.demo.qunar.com/mock/95100/project/list?lx=1');
		xhr.onreadystatechange = function () {
			if (!/^(2|3)\d{2}$/.test(xhr.status)) return;
			if (xhr.readyState === 4) {
				console.log(xhr.responseText);
			}
		}
		xhr.send(null); */
	</script>
</body>

</html>